{"version":3,"sources":["../../js/Popup/Login.js"],"names":["PopupInterface","Login","render","register","document","querySelector","addEventListener","openRegister","event","preventDefault","Register","open","email","psw","emailV","value","pswV","error","console","log","user","location","reload","result"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AACA,OAAOA,cAAP,MAA2B,4BAA3B,C,CACA;AACA;;IAEqBC,K;;;;;AAEnB,mBAAc;AAAA;;AAAA;AAEb;;;;2BAEK;AACJ,WAAKC,MAAL;;AACA,sEAFI,CAIJ;AACD;AACC;AAEA;;;AACA,UAAMC,QAAQ,GAAGC,QAAQ,CAACC,aAAT,CAAuB,SAAvB,CAAjB;AACAF,MAAAA,QAAQ,CAACG,gBAAT,CAA0B,OAA1B,EAAmC,KAAKC,YAAxC;AACD,K,CAED;;;;iCACaC,K,EAAM;AACjBA,MAAAA,KAAK,CAACC,cAAN;AACA,UAAMN,QAAQ,GAAG,IAAIO,QAAJ,EAAjB;AACAP,MAAAA,QAAQ,CAACQ,IAAT;AACD;;;gCAEWH,K,EAAM;AAChBA,MAAAA,KAAK,CAACC,cAAN;AAEA,UAAMG,KAAK,GAAGR,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAd;AACA,UAAMQ,GAAG,GAAGT,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAZ,CAJgB,CAMhB;;AACA,UAAMS,MAAM,GAAGF,KAAK,CAACG,KAArB;AACA,UAAMC,IAAI,GAAGH,GAAG,CAACE,KAAjB,CARgB,CAUhB;;AACA,UAAIE,KAAK,GAAG,KAAZ;;AACA,UAAIA,KAAK,GAAI,CAACH,MAAD,IAAW,CAACE,IAAzB,EAAgC;AAC9B,yEAAY,4CAAZ;AACD;;AACD,UAAGC,KAAH,EAAS;AACP;AACD,OAjBe,CAoBpB;AAGE;AAEE;AACA;AACA;AAEA;AACE;AACA;AACA;AACF;;;AAEA;;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ;AACAhB,MAAAA,QAAQ,CAACiB,QAAT,CAAkBC,MAAlB,CAAyB,IAAzB;AACD;;;6BAEO;AACN,UAAMC,MAAM,ykDAAZ;;AAiCF,wEAAaA,MAAb;AACC;;;;EAtGgCvB,c;;SAAdC,K","sourcesContent":["\r\nimport PopupInterface from '../Popup/PopupInterface.js';\r\n//import UsersDAO from '../../WEB-INF/classes/connexion/UsersDAO.java';\r\n//import Users from '../../WEB-INF/classes/connexion/Users.java';\r\n\r\nexport default class Login extends PopupInterface {   \r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  open(){\r\n    this.render();\r\n    super.open();\r\n\r\n    //Listener to send the connection request on the DAO\r\n   // const buttonRequest = document.querySelector('#sendRequest');\r\n    //buttonRequest.addEventListener('click', this.sendRequest);\r\n\r\n    //Listener to redirect on the register page\r\n    const register = document.querySelector('#SignUp');\r\n    register.addEventListener('click', this.openRegister);\r\n  }\r\n  \r\n  //TODO don't forget to implement this, or delete it.\r\n  openRegister(event){\r\n    event.preventDefault();\r\n    const register = new Register();\r\n    register.open();\r\n  }\r\n\r\n  sendRequest(event){\r\n    event.preventDefault();\r\n\r\n    const email = document.querySelector('#usrmail');\r\n    const psw = document.querySelector('#psw');\r\n\r\n    //List of the value about the querySelector\r\n    const emailV = email.value;\r\n    const pswV = psw.value;\r\n\r\n    //If a field is empty\r\n    let error = false;\r\n    if (error = (!emailV || !pswV)) {\r\n      super.error(\"All field is required. Please complete it.\");\r\n    }\r\n    if(error){\r\n      return;\r\n    }\r\n   \r\n\r\n//    fetch(\"http://localhost:8080/\",{\r\n\r\n\r\n  //  });\r\n\r\n    //Connect to the database and see if the e-mail match.\r\n    //dao = new UsersDAO();\r\n    //user = dao.find(emailV);\r\n      \r\n    //if(user!=null && user.getPassword().equals(pswV)) {\r\n      //Create a session with the attribute we want\r\n      //session.setAttribute(\"login\", user );\r\n      //session.setMaxInactiveInterval(10);\r\n    //}\r\n\r\n    super.close();\r\n    console.log(\"connection ok, avec:\");\r\n    console.log(user);\r\n    document.location.reload(true);\r\n  }\r\n\r\n  render(){\r\n    const result =`  \r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\" style=\"padding:35px 50px;\">\r\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\r\n          <h4><span class=\"glyphicon glyphicon-log-in\"></span> Login</h4>\r\n        </div>\r\n        <div class=\"modal-body\" style=\"padding:40px 50px;\">\r\n          <form action=\"Authentification\" method=post role=\"form class=form\">\r\n           \r\n            <div class=\"form-group\">\r\n              <label for=\"usrmail\"><span class=\"glyphicon glyphicon-envelope\"></span> E-mail</label>\r\n              <input type=\"email\" class=\"form-control\" id=\"usrmail\" placeholder=\"Enter email\">\r\n            </div>\r\n            \r\n            <div class=\"form-group\">\r\n              <label for=\"psw\"><span class=\"glyphicon glyphicon-lock\"></span> Password</label>\r\n              <input type=\"password\" class=\"form-control\" id=\"psw\" placeholder=\"Enter password\">\r\n            </div>\r\n\r\n            <center><p id=\"error\"></p></center>\r\n            \r\n            <div class=\"checkbox\">\r\n              <label><input type=\"checkbox\" value=\"\" checked>Remember me</label>\r\n            </div>\r\n              <button id=\"sendRequest\" type=\"submit\" class=\"btn btn-success btn-block\"><span class=\"glyphicon glyphicon-off\"></span> Login</button>\r\n          </form>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <p>Not a member? <a id=\"SignUp\"href=\"#\">Sign Up</a></p>\r\n          <p>Forgot <a href=\"#\">Password?</a></p>\r\n        </div>\r\n      </div>\r\n      `;\r\n  super.render(result);\r\n  }\r\n\r\n\r\n\r\n\r\n}"],"file":"Login.js"}